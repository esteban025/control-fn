---
import CardDashboard from "@/components/CardDashboard.astro";
import { getExpenses } from "@/lib/expenses";
// assets
import ChartBarIcon from "@/assets/chartBar.svg";
import ClockIcon from "@/assets/clock.svg";

// types
import type { Expense } from "@/types/expense";

const expenses = (await getExpenses()) as unknown as Expense[];
---

<div
  class="w-full grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4 cont-card"
>
  <CardDashboard
    title="Gastos por Categoría"
    description="Distribución de tus gastos al mes"
  >
    <ChartBarIcon class="size-5" slot="icon" />
    {
      expenses.length > 0
        ? `Total de gastos: ${expenses.reduce((acc, expense) => acc + expense.amount, 0)}`
        : "No hay gastos registrados"
    }
  </CardDashboard>
  <CardDashboard
    title="Gastos Recientes"
    description="Últimos gastos registrados del mes"
  >
    <ClockIcon class="size-5" slot="icon" />
    <p>hola</p>
  </CardDashboard>
</div>
