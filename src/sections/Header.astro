---
import Logo from "@/assets/logo.svg";
import Buttons from "@/components/Buttons.astro";
import { getSession } from "auth-astro/server";
const session = await getSession(Astro.request);

interface Props {
  inLogin?: boolean;
}
const { inLogin = false } = Astro.props as Props;
---

<header
  class="p-2 backdrop-blur-lg rounded-full fixed top-2 z-50 left-0 right-0 animate-scroll-down w-11/12 max-w-6xl mx-auto shadow-2xl"
>
  <div class="flex items-center justify-between w-full">
    <a href="/">
      <Logo class="w-full h-auto max-w-36 pl-1" />
    </a>
    {
      !inLogin && (
        <>
          {session ? (
            <Buttons name="Cerrar Sesión" btnId="logout-button" secondary />
          ) : (
            <Buttons name="Iniciar Sesión" btnId="login-button" />
          )}
        </>
      )
    }
  </div>
</header>

<style>
  .animate-scroll-down {
    animation: scrollDown 5s both;
    animation-timeline: scroll(root block);
    animation-range: 0px 200px;
  }

  @keyframes scrollDown {
    from {
      background-color: var(--color-gray-50);
    }
    to {
      background-color: color-mix(
        in oklab,
        var(--color-gray-200) 60%,
        transparent
      );
      transform: scale(0.95);
    }
  }
</style>
